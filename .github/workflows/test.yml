name: GitHub Actions Demo
on: [push]
jobs:
  Test-Sea:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: sudo apt update -y 
      - run: sudo apt install -y make gcc g++ git file libmagic-dev python python3 libiniparser1 libiniparser-dev cmake libgtest-dev valgrind bats
      - run: sudo cp /usr/include/iniparser/*.h /usr/include/
      - run: (cd ${{ github.workspace }} && ls && make && make test debug_opts="-g -ggdb --coverage -fprofile-arcs -ftest-coverage")
      # - run: sudo useradd --no-log-init -r tmpu
      - run: bats tests/tests.bats 
      - run: SEA_HOME=$PWD tests/test_custom

